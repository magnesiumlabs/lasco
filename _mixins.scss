// ============================================================================================= //
//                                            MIXINS                                             //
// ============================================================================================= //

@use "sass:map";
@use "@sass-collective/breakpoint";
@use "@sass-collective/css";
@use "./variables";

@mixin core-styles {

    // --------------------------------- //
    // Display
    // --------------------------------- //

    @each $key in variables.$display {
        .#{$key} {
            @include css.declaration(display, $key);

            // --------------------------------- //
            // Breakpoint
            // --------------------------------- //

            @include _breakpoint {
                @include css.declaration(display, $key);
            }
        }
    }

    // --------------------------------- //
    // Flex
    // --------------------------------- //

    .flex {

        // --------------------------------- //
        // Direction
        // --------------------------------- //

        &-direction {
            @include _classes(flex-direction, variables.$flex-direction);
        }

        // --------------------------------- //
        // Wrap
        // --------------------------------- //

        @include _classes(flex-wrap, variables.$flex-wrap);

        // --------------------------------- //
        // Grow
        // --------------------------------- //

        &-grow {
            @each $key, $value in variables.$flex-grow {
                @if ($value == 1) {
                    @include css.declaration(flex-grow, $value);

                    @include _breakpoint {
                        @include css.declaration(flex-grow, $value);
                    }
                } @else {
                    @include _suffix($key) {
                        @include css.declaration(flex-grow, $value);

                        @include _breakpoint {
                            @include css.declaration(flex-grow, $value);
                        }
                    }
                }
            }
        }

        // --------------------------------- //
        // Shrink
        // --------------------------------- //

        &-shrink {
            @each $key, $value in variables.$flex-shrink {
                @if ($value == 1) {
                    @include css.declaration(flex-shrink, $value);

                    @include _breakpoint {
                        @include css.declaration(flex-shrink, $value);
                    }
                } @else {
                    @include _suffix($key) {
                        @include css.declaration(flex-shrink, $value);

                        @include _breakpoint {
                            @include css.declaration(flex-shrink, $value);
                        }
                    }
                }
            }
        }
    }

    // --------------------------------- //
    // Align
    // --------------------------------- //

    .align-self {
        @include _classes(align-self, variables.$align-self);
    }

    .align-content {
        @include _classes(align-content, variables.$align-content);
    }

    .align-items {
        @include _classes(align-items, variables.$align-items);
    }

    // --------------------------------- //
    // Justify
    // --------------------------------- //

    .justify-self {
        @include _classes(justify-self, variables.$justify-self);
    }

    .justify-content {
        @include _classes(justify-content, variables.$justify-content);
    }

    .justify-items {
        @include _classes(justify-items, variables.$justify-items);
    }
}

// ------------------------------------------------------------------------- //
// Private mixins
// ------------------------------------------------------------------------- //

@mixin _suffix($name) {
    &-#{$name} {
        @content;
    }
}

@mixin _set-class($property, $key) {
    $name: $key;

    @if map.has-key(variables.$names, $key) {
        $name: map.get(variables.$names, $key);
    }

    &-#{$name} {
        @include css.declaration($property, $key);
    }
}

@mixin _classes($property, $values) {
    @each $key in $values {
        @include _set-class($property, $key);
    }

    // --------------------------------- //
    // Breakpoint
    // --------------------------------- //

    @include _breakpoint {
        @each $key in $values {
            @include _set-class($property, $key);
        }
    }
}

@mixin _breakpoint() {
    @each $key, $value in breakpoint.$screens {
        @include breakpoint.up($key) {
            @include css.selector($key) {
                @content;
            }
        }
    }
}

// ------------------------------------------------------------------------- //
// Public mixins
// ------------------------------------------------------------------------- //

// ...
